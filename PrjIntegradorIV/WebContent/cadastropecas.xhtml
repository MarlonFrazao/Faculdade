<?xml version="1.0" encoding="ISO-8859-1" ?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	lang="pt-br">
<h:head>
<meta charset="UTF-8"/>
	<title></title>
</h:head>
<h:body>
	<h:form>
		<p:growl id="messages" showDetail="true" sticky="true" />
		<p:menubar style="background-color:blue">
			<p:menuitem url="/homefaces.jsf" value="Home" icon="ui-icon-home" />
			<p:menuitem url="/produtos.jsf" value="Produtos"
				icon="ui-icon-search" />
			<p:menuitem url="/carrinho.jsf" value="Carrinho" icon="ui-icon-cart" />
			<p:menuitem url="/cadastrousuario.jsf" value="Novo Usuario"
				icon="ui-icon-plus" />
			<p:menuitem url="/cliente.jsf" value="Perfil" icon="ui-icon-person" />
			<f:facet name="options">
				<h:form>
					<p:outputLabel id="logado"
						value="Bem vindo #{cadastroClienteBean.login.nome}"
						style="padding:10px" update="logado" />
					<h:outputLink value="javascript:void(0)"
						onclick="PF('dlg').show();" title="login">
						<p:commandButton id="btn" value="Login" icon="ui-icon-extlink" />
					</h:outputLink>

					<p:growl id="growl" sticky="true" showDetail="true" life="300" />

					<p:dialog header="Login" widgetVar="dlg" resizable="false">
						<h:panelGrid columns="2" cellpadding="5">
							<h:outputLabel for="cpf" value="CPF:" />
							<p:inputText id="cpf" value="#{cadastroClienteBean.cliente.cpf}"
								required="true" label="cpf" />

							<h:outputLabel for="senha" value="Senha:" />
							<p:password id="senha"
								value="#{cadastroClienteBean.cliente.senha}" required="true"
								label="senha" />

							<f:facet name="footer" style="align: center">
								<p:commandButton value="Login" update="growl"
									action="#{cadastroClienteBean.login}"
									oncomplete="handleLoginRequest(xhr, status, args)" />
							</f:facet>
						</h:panelGrid>
					</p:dialog>
				</h:form>

				<script type="text/javascript">
					function handleLoginRequest(xhr, status, args) {
						if (args.validationFailed || !args.loggedIn) {
							PF('dlg').jq.effect("shake", {
								times : 5
							}, 100);
						} else {
							PF('dlg').hide();
							$('#loginLink').fadeOut();
						}
					}
				</script>

			</f:facet>
		</p:menubar>
	</h:form>


	<div class="title" align="center">
		<span class="title_icon"></span>
		<h1>Cadastro de pecas</h1>
	</div>

	<div class="feat_prod_box_details" align="center">

		<p:panel header="INFORME OS DADOS DA PEÇA">
			<h:form id="cadastro">
				<p:growl id="salvoSucesso" sticky="true" showDetail="true" life="300" />
				<p:panelGrid columns="3" id="panelGrid" type="reset" style="border: none !important;">
					
					<h:outputText value="Descrição:" for="descricao" />
					<p:inputText id="descricao" var="descricao" value="#{pecaBean.peca.descricao}"
						size="35" />
					<h:outputText value="" for="" />
					
					
					<h:outputText value="Modelo:" for="modelo" />
					<p:selectOneMenu id="combomodelo" value="#{pecaBean.modelo.id}" 
						converter="omnifaces.SelectItemsConverter">
						<f:selectItem itemLabel="Escolha um modelo" />
						<f:selectItems value="#{pecaBean.modelos}" var="modelo"
							itemValue="#{modelo.id}" itemLabel="#{modelo.descricao}" />
					</p:selectOneMenu>
					
					<p:commandLink update=":cadastro:detalhes"
						oncomplete="PF('popUpDetalhes').show()" title="Informações">
						<h:outputText value="Novo"
							style="margin:0 auto;" />
						
							
							<p:dialog header="Cadastro de Modelo" widgetVar="popUpDetalhes"
								global="true" showEffect="fade" hideEffect="fade" resizable="false">
								<p:outputPanel id="detalhes" style="text-align:center;">
								<h:form id="cadastroMod">
								<p:panelGrid columns="2" rendered="#{not empty pecaBean.pecas}"
								columnClasses="label,value">
								
								<h:outputText value="Descricao: " for="descricaoMod"/>
								<p:inputText id="descricaoMod" var="descricaoMod" value="#{modeloBean.modelo.descricao}"
								size="35" />
								
								<h:outputText value="Ano: " for="ano"/>
								<p:inputText id="ano" var="ano" value="#{modeloBean.modelo.ano}"
								size="35" />
								
								<h:outputText value="Montadora:" for="montadora" />
									<p:selectOneMenu id="combomontadora" value="#{modeloBean.modelo.montadora.id}" 
									converter="omnifaces.SelectItemsConverter">
									<f:selectItem itemLabel="Escolha uma montadora" />
									<f:selectItems value="#{modeloBean.montadoras}" var="montadora"
									itemValue="#{montadora.id}" itemLabel="#{montadora.descricao}" />
								</p:selectOneMenu>
								
								<h:outputText value="Linha do veiculo:" for="ldv" />
									<p:selectOneMenu id="comboldv" value="#{modeloBean.modelo.linha.id}" 
									converter="omnifaces.SelectItemsConverter">
									<f:selectItem itemLabel="Escolha uma linha" />
									<f:selectItems value="#{modeloBean.linhas}" var="linha"
									itemValue="#{linha.id}" itemLabel="#{linha.descricao}" />
								</p:selectOneMenu>
								
								<h:outputText value="" for="" />
								<h:commandButton id="botaoModelo" value="Salvar"
								actionListner="#{modeloBean.inserir}" update="combomodelo" />
								
								</p:panelGrid>
								</h:form>
								</p:outputPanel>
							</p:dialog>
							
					</p:commandLink>
					
					
					
					
					<h:outputText value="Aplicação:" for="aplicacao" />
					
					
					<p:selectOneMenu id="comboaplicacao" value="#{pecaBean.peca.aplicacao.id}" 
						converter="omnifaces.SelectItemsConverter">
						<f:selectItem itemLabel="Escolha uma aplicação" />
						<f:selectItems value="#{pecaBean.aplicacoes}" var="aplicacao"
							itemValue="#{aplicacao.id}" itemLabel="#{aplicacao.descricao}" />
					</p:selectOneMenu>
					
					
					<h:outputText value="" for="" />


					<h:outputText value="Adicional:" for="adicional" />
					<p:inputText id="adicional" var="adicional" value="#{pecaBean.peca.adicional}"
						size="35" />
					<h:outputText value="" for="" />
					
				
					<h:outputText value="Quantidade:" />
					<p:inputText id="qtdeTotal" label="qtdTotal"
						value="#{pecaBean.peca.qtdeTotal}" size="35" required="true" />
					<h:outputText value="" for="" />
					
					<h:outputText value="foto:" />
					<p:fileUpload fileUploadListener="#{pecaBean.upload}" mode ="advanced"
        			allowTypes="/(\.|\/)(gif|jpe?g|png)$/" 
        			sizeLimit="100000"
        			multiple="true" 
        			dragDropSupport="true"
        			description="Selecione Imagens"/>
					<h:outputText value="" for="" />
					
					
					
					<h:outputText value="" for="" />
					<h:commandButton id="botao" value="Salvar"
						action="#{pecaBean.inserir}" update="salvoSucesso panelGrid" />
					
					<h:outputText value="" for="" />


				</p:panelGrid>
			</h:form>

		</p:panel>
	</div>
	
	
	

</h:body>
</html>